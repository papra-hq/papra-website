---
import ContactForm from '../../components/ContactForm.astro';
import Footer from '../../components/Footer.astro';
import Header from '../../components/Header.astro';
import { useI18n } from '../../i18n/i18n';
import { LOCALES } from '../../i18n/i18n.constants';
import Layout from '../../layouts/Layout.astro';
import { cn } from '../../utils/cn';

export async function getStaticPaths() {
    return LOCALES.map(locale => ({ params: { locale } }));
}

const { t } = useI18n({ locale: Astro.currentLocale });

const contactOptions = [
  {
    name: t('contact.option.email.name'),
    label: t('contact.option.email.label'),
    href: 'mailto:contact@papra.app',
    icon: 'i-tabler-mail',
  },
  {
    name: t('contact.option.discord.name'),
    label: t('contact.option.discord.label'),
    href: '/discord',
    icon: 'i-tabler-brand-discord',
  },
  {
    name: t('contact.option.github.name'),
    label: t('contact.option.github.label'),
    href: 'https://github.com/papra-hq/papra',
    icon: 'i-tabler-brand-github',
  },
  {
    name: t('contact.option.bluesky.name'),
    label: t('contact.option.bluesky.label'),
    href: 'https://bsky.app/profile/papra.app',
    icon: 'i-tabler-brand-bluesky',
  },
];
---

<Layout>
  <div class="bg-card flex flex-col w-full min-h-screen">
    <Header />

    <div class="w-full bg-[linear-gradient(to_right,#80808010_1px,transparent_1px),linear-gradient(to_bottom,#80808010_1px,transparent_1px)] bg-[size:48px_48px] bg-background border-b pt-32 pb-24">
      <div class="max-w-700px mx-auto p-4">
        <h1 class="text-3xl mb-2 font-bold">{t('contact.title')}</h1>
        <p class="text-base mb-2 leading-tight">{t('contact.subtitle')}</p>
      </div>
    </div>

    <div class="max-w-5xl mx-auto p-4 flex flex-col md:flex-row gap-6 my-12 flex-1 w-full">
      <div class="flex flex-col gap-4 md:min-w-350px">
        {
          contactOptions.map(option => (
            <a href={option.href} target="_blank" rel="noopener noreferrer" class="flex items-center gap-3 border rounded-lg bg-background p-4 hover:(border-primary) transition">
              <div class="flex items-center justify-center bg-primary/5 rounded-lg size-10">
                <div class={cn(option.icon, 'size-7 bg-primary')} />
              </div>
              <div class="flex-1">
                <div class="font-semibold text-base lh-tight">{option.name}</div>
                <div class="text-sm text-muted-foreground lh-tight">{option.label}</div>
              </div>

              <div class="flex items-center">
                <div class="i-tabler-external-link size-5 text-muted-foreground" />
              </div>
            </a>
          ))
        }
      </div>

      <div class="border rounded-lg bg-background p-6 flex-1">
        <ContactForm />
      </div>
    </div>

    <Footer class="bg-background" />
  </div>
</Layout>
